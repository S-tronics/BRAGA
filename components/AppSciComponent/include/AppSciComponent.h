/**********************************************************************************************************************/
/**
 * @file        AppSciComponent.h
 *
 * @author      Stijn Vermeersch
 * @date        16.05.2022
 *
 * @brief
 *
 *
 *
 * \n<hr>
 * Copyright (c) 2022, S-tronics BV\n
 * All rights reserved.
 * \n<hr>\n
 */
/**********************************************************************************************************************/
#ifndef AppSciComponent_H
#define AppSciComponent_H
/**********************************************************************************************************************/

/***********************************************************************************************************************
; I N C L U D E S
;---------------------------------------------------------------------------------------------------------------------*/
//#include "AppConfig.h"
#include "stdbool.h"
/**********************************************************************************************************************/

/***********************************************************************************************************************
; E X P O R T E D   S Y M B O L   D E F I N I T I O N S   A N D   M A C R O S
;---------------------------------------------------------------------------------------------------------------------*/
/**********************************************************************************************************************/

/***********************************************************************************************************************
; E X P O R T E D   T Y P E D E F S
;---------------------------------------------------------------------------------------------------------------------*/
typedef struct
{
    char mui[9];
    char mux;
    char data[8];
    char length;
    char crc;
} APPSCICONFIG;

typedef struct
{
    char address;
    char mux;
    char data[8];
    char length;
    char crc;
} APPSCIFRAME;

typedef struct
{
    bool config; // If true the stair is configurated
    bool has_px; // True if this stair has a px-sensor mounted
    APPSCICONFIG publish;
    APPSCICONFIG publishconfirm;
    APPSCIFRAME pxconfig;
    APPSCIFRAME pxget;
    APPSCIFRAME pxset;
    APPSCIFRAME colorset;
} APPSCISTAIR;
/**********************************************************************************************************************/

/***********************************************************************************************************************
; E X P O R T E D   V A R I A B L E S
;---------------------------------------------------------------------------------------------------------------------*/

static APPSCISTAIR stairs[CONFIG_MAX_NBR_STAIRS];
/**********************************************************************************************************************/

/***********************************************************************************************************************
; E X P O R T E D   F U N C T I O N   P R O T O T Y P E S
;---------------------------------------------------------------------------------------------------------------------*/
/**
 * @brief   Initialise function for this module
 *
 *
 */
void AppSciInit(void);

/**
 * @brief   Initialise function for this module
 *
 *
 */
bool AppSciSetupStair(uint8_t stair_number);

/**
 * @brief   Initialise function for this module
 *
 *
 */
void AppSciPxStartUp(void);
/**
 * @brief   Tick function for giving this task module a time base.
 *
 *
 */
void AppSciHandler(void);

/**
 * @brief   Tick function for giving this task module a time base.
 *
 *
 */
void AppSciColorSet(uint8_t stairsnbr, uint8_t white, uint8_t red, uint8_t grn, uint8_t blue);

/**
 * @brief   Tick function for giving this task module a time base.
 *
 *
 */
void AppSciColorSetAll(void);
/**********************************************************************************************************************/

/***********************************************************************************************************************
; E X P O R T E D   S T A T I C   I N L I N E   F U N C T I O N S
;---------------------------------------------------------------------------------------------------------------------*/
/**********************************************************************************************************************/

#endif /* AppSciComponent_H */
